{% extends "base.html" %}

{% block head %}
<link rel="image_src" href="{{ data.original_source }}">
<meta property="og:image" content="{{ data.original_source }}">
<meta property="og:title" content="{{ data.name }}">
<meta property="og:url" content="{{ base_url }}">
<meta property="og:description" content="Tinder for the best gifs in the galaxy.">
<meta property="og:type" content="video.other" />
<meta property="og:video"             content="http://s.imgur.com/include/flash/gifplayer.swf?imgur_video=http://i.imgur.com/{{ data.shortcode }}.mp4&imgur_width=550&imgur_height=309&imgur_url=http://imgur.com/{{ data.shortcode }}" />
<meta property="og:video:secure_url"  content="https://s.imgur.com/include/flash/gifplayer.swf?imgur_video=https://i.imgur.com/{{ data.shortcode }}.mp4&imgur_width=550&imgur_height=309&imgur_url=http://imgur.com/{{ data.shortcode }}" />
<meta property="og:video:type"        content="application/x-shockwave-flash" />
<meta property="og:video:width"       content="500" />
<meta property="og:video:height"      content="281" />
<meta property="og:video"             content="http://i.imgur.com/{{ data.shortcode }}.mp4" />
<meta property="og:video:secure_url"  content="https://i.imgur.com/{{ data.shortcode }}.mp4" />
<meta property="og:video:type"        content="video/mp4" />
<meta property="og:video:width"       content="500" />
<meta property="og:video:height"      content="281" />
<meta name="twitter:card" content="player" />
<meta name="twitter:site" content="@choosefunapp" />
<meta name="twitter:title" content="{{ data.name }}" />
<meta name="twitter:image" content="{{ data.original_source }}" />
<meta name="twitter:url" content="{{ base_url }}" />
<meta name="twitter:player"                     content="https://i.imgur.com/{{ data.shortcode }}.gifv" />
<meta name="twitter:player:width"               content="550" />
<meta name="twitter:player:height"              content="309" />
<meta name="twitter:player:stream"              content="https://i.imgur.com/{{ data.shortcode }}.mp4" />
<meta name="twitter:player:stream:content_type" content="video/mp4">
{% endblock %}

{% block body %}
<section id="shortcode">
  <div class="container">
    <div class="row">
      <div class="col-md-8 col-md-offset-2">
        <div class="row">
          <div class="col-xs-12">
            <div class="logo">
              <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Fun logo" />
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">
            <div class="shortcode-image-container">
              <div class="shortcode-image">
                <div class="image-view">
                    {% if data %}
                        {% if not request.MOBILE %}
                            <video autoplay loop muted style="width: 100%;">
                                <source type="video/webm" src="//i.imgur.com/{{ data.shortcode }}.webm">
                                <source type="video/mp4" src="//i.imgur.com/{{ data.shortcode }}.mp4">
                            </video>
                        {% else %}
                            <img src="//i.imgur.com/{{ data.shortcode }}.gif" style="width: 100%;">
                        {% endif %}
                    {% else %}
                        <h1>404</h1>
                    {% endif %}
                </div>
              </div>
              {% if data %}
              <div class="shortcode-link" onclick="this.focus();this.select();">
                <h4>Share: </h4>
                <textarea id="image-share-link" onclick="this.focus();this.select();" readonly="readonly" rows="1">{{ host_url }}v/{{ data.shortcode }}</textarea>
              </div>
              {% endif %}
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">
            <div class="footer">
              <h3>Enjoy and share the best gifs with Fun app</h3>
                <!-- Begin MailChimp Signup Form -->
                <div id="mc_embed_signup">
                  <form action="//assembly.us10.list-manage.com/subscribe/post?u=608c78fb2081068a03b335c80&amp;id=c435774c15" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
                    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                    <div style="position: absolute; left: -5000px;"><input type="text" name="b_608c78fb2081068a03b335c80_c435774c15" tabindex="-1" value=""></div>
                    <div class="form-group" id="mc_embed_signup_scroll">
                      <div class="col-md-6 col-xs-12">
                        <input id="email-input" placeholder="Email address" type="email" value="" name="EMAIL" class="email form-control" id="mce-EMAIL" required>
                      </div>
                      <div class="col-md-6 col-xs-12">
                        <input type="submit" value="Sign up for beta access" name="subscribe" id="mc-embedded-subscribe" class="btn btn-mailing-list">
                      </div>
                    </div>
                  </form>
                </div>
                <br><br><br><br>
                <!--End mc_embed_signup-->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}